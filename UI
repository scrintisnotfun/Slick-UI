-- Wind UI Library - Remade for a Blacker and Better Look (v1.1 - Corrected)
-- Usage: See example at the bottom of the script.

local WindUI = {}
WindUI.__index = WindUI

local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")
local TweenService = game:GetService("TweenService")

local random = math.random
local concat = table.concat
local tableCreate = table.create
local BUTTON_TWEEN_INFO = TweenInfo.new(0.2, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
local TOGGLE_TWEEN_ANIMATED = TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
local TOGGLE_TWEEN_INSTANT = TweenInfo.new(0, Enum.EasingStyle.Linear)
local DROPDOWN_TWEEN_INFO = TweenInfo.new(0.3, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)
local FADE_IN_TWEEN_INFO = TweenInfo.new(0.5, Enum.EasingStyle.Quint, Enum.EasingDirection.Out)


-- Icon mapping for string-based icons
local iconMap = {
    ["star"] = "‚≠ê", ["lightbulb"] = "üí°", ["home"] = "üè†", ["settings"] = "‚öôÔ∏è",
    ["user"] = "üë§", ["search"] = "üîç", ["bell"] = "üîî", ["heart"] = "‚ù§Ô∏è",
    ["shield"] = "üõ°Ô∏è", ["crown"] = "üëë", ["fire"] = "üî•", ["rocket"] = "üöÄ",
    ["trophy"] = "üèÜ", ["gift"] = "üéÅ", ["music"] = "üéµ", ["camera"] = "üì∑",
    ["book"] = "üìö", ["globe"] = "üåê", ["lock"] = "üîí", ["key"] = "üîë"
}

-- Modified getIcon to return nil if icon doesn't exist in map
local function getIcon(icon)
    if not icon then return nil end
    if iconMap[icon] then return iconMap[icon] end
    if icon:match("[%z\1-\127\194-\244][\128-\191]*") and #icon <= 4 then return icon end
    return nil
end

-- Added function to create premium popup
local function createPremiumPopup(screenGui, mainFrame)
    local backdrop = Instance.new("Frame")
    backdrop.Name = "PremiumPopupBackdrop"
    backdrop.Size = UDim2.new(1, 0, 1, 0)
    backdrop.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    backdrop.BackgroundTransparency = 0.7
    backdrop.BorderSizePixel = 0
    backdrop.ZIndex = 1000
    backdrop.Parent = screenGui

    local popup = Instance.new("Frame")
    popup.Name = "PremiumPopup"
    popup.Size = UDim2.new(0, 350, 0, 200)
    local mainFrameCenter = mainFrame.AbsolutePosition + (mainFrame.AbsoluteSize / 2)
    popup.Position = UDim2.new(0, mainFrameCenter.X - 175, 0, mainFrameCenter.Y - 100)
    popup.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
    popup.BorderSizePixel = 0
    popup.ZIndex = 1001
    popup.Parent = backdrop

    local popupCorner = Instance.new("UICorner")
    popupCorner.CornerRadius = UDim.new(0, 12)
    popupCorner.Parent = popup

    local title = Instance.new("TextLabel")
    title.Name = "PopupTitle"
    title.Size = UDim2.new(1, -40, 0, 50)
    title.Position = UDim2.new(0, 20, 0, 20)
    title.BackgroundTransparency = 1
    title.Text = "Premium Only!"
    title.TextColor3 = Color3.fromRGB(255, 215, 0)
    title.TextSize = 24
    title.Font = Enum.Font.GothamBold
    title.TextXAlignment = Enum.TextXAlignment.Center
    title.ZIndex = 1002
    title.Parent = popup

    local lockIcon = Instance.new("TextLabel")
    lockIcon.Name = "PopupLockIcon"
    lockIcon.Size = UDim2.new(0, 40, 0, 40)
    lockIcon.Position = UDim2.new(0.5, -20, 0, 75)
    lockIcon.BackgroundTransparency = 1
    lockIcon.Text = "üîí"
    lockIcon.TextSize = 32
    lockIcon.ZIndex = 1002
    lockIcon.Parent = popup

    local discordBtn = Instance.new("TextButton")
    discordBtn.Name = "DiscordButton"
    discordBtn.Size = UDim2.new(0, 150, 0, 38)
    discordBtn.Position = UDim2.new(0, 20, 1, -55)
    discordBtn.BackgroundColor3 = Color3.fromRGB(88, 101, 242)
    discordBtn.Text = "Copy Discord Link"
    discordBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    discordBtn.TextSize = 13
    discordBtn.Font = Enum.Font.GothamBold
    discordBtn.BorderSizePixel = 0
    discordBtn.AutoButtonColor = false
    discordBtn.ZIndex = 1002
    discordBtn.Parent = popup

    local discordCorner = Instance.new("UICorner")
    discordCorner.CornerRadius = UDim.new(0, 8)
    discordCorner.Parent = discordBtn

    local closeBtn = Instance.new("TextButton")
    closeBtn.Name = "CloseButton"
    closeBtn.Size = UDim2.new(0, 150, 0, 38)
    closeBtn.Position = UDim2.new(1, -170, 1, -55)
    closeBtn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    closeBtn.Text = "Close"
    closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeBtn.TextSize = 14
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.BorderSizePixel = 0
    closeBtn.AutoButtonColor = false
    closeBtn.ZIndex = 1002
    closeBtn.Parent = popup

    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 8)
    closeCorner.Parent = closeBtn

    discordBtn.MouseEnter:Connect(function()
        TweenService:Create(discordBtn, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(78, 91, 232)}):Play()
    end)

    discordBtn.MouseLeave:Connect(function()
        TweenService:Create(discordBtn, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(88, 101, 242)}):Play()
    end)

    closeBtn.MouseEnter:Connect(function()
        TweenService:Create(closeBtn, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(55, 55, 55)}):Play()
    end)

    closeBtn.MouseLeave:Connect(function()
        TweenService:Create(closeBtn, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(45, 45, 45)}):Play()
    end)

    discordBtn.MouseButton1Click:Connect(function()
        local discordLink = "https://discord.gg/yourserver"
        setclipboard(discordLink)
        discordBtn.Text = "Copied!"
        task.wait(1.5)
        discordBtn.Text = "Copy Discord Link"
    end)

    local function closePopup() backdrop:Destroy() end
    closeBtn.MouseButton1Click:Connect(closePopup)
    backdrop.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then closePopup() end
    end)

    return backdrop
end

local randomChars = {}
do
    local chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789"
    for i = 1, #chars do randomChars[i] = chars:sub(i, i) end
end
local randomCharsCount = #randomChars

local function allocateBuffer(length)
    if table.create then return table.create(length) end
    return {}
end

local function randomName()
    local length = random(8, 12)
    local buffer = allocateBuffer(length)
    for i = 1, length do buffer[i] = randomChars[random(1, randomCharsCount)] end
    local name = concat(buffer)
    if not table.create then
        for i = 1, length do buffer[i] = nil end
    end
    return name
end

function WindUI:CreateWindow(options)
    local self = setmetatable({}, WindUI)
    options = options or {}
    local title = options.Title or "Wind UI Library"
    local size
    if typeof(options.Size) == "UDim2" then
        size = {options.Size.X.Offset, options.Size.Y.Offset}
    else
        size = options.Size or {850, 500}
    end

    local player = Players.LocalPlayer
    local playerGui = player:WaitForChild("PlayerGui")

    self.ScreenGui = Instance.new("ScreenGui")
    self.ScreenGui.Name = randomName()
    self.ScreenGui.ResetOnSpawn = false
    self.ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    self.ScreenGui.Parent = playerGui
    self._screenGui = self.ScreenGui

    self.MainFrame = Instance.new("Frame")
    self.MainFrame.Name = randomName()
    self.MainFrame.Size = UDim2.new(0, size[1], 0, size[2])
    self.MainFrame.Position = UDim2.new(0.5, -size[1]/2, 0.5, -size[2]/2)
    self.MainFrame.BackgroundColor3 = Color3.fromRGB(18, 18, 18)
    self.MainFrame.BorderSizePixel = 0
    self.MainFrame.ClipsDescendants = true
    self.MainFrame.Active = true
    self.MainFrame.Visible = true
    self.MainFrame.Parent = self.ScreenGui

    local mainCorner = Instance.new("UICorner")
    mainCorner.CornerRadius = UDim.new(0, 12)
    mainCorner.Parent = self.MainFrame

    -- Fade-in animation
    self.MainFrame.BackgroundTransparency = 1
    TweenService:Create(self.MainFrame, FADE_IN_TWEEN_INFO, {BackgroundTransparency = 0}):Play()


    local titleBar = Instance.new("Frame")
    titleBar.Name = randomName()
    titleBar.Size = UDim2.new(1, 0, 0, 50)
    titleBar.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
    titleBar.BorderSizePixel = 0
    titleBar.Active = true
    titleBar.Parent = self.MainFrame

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Name = randomName()
    titleLabel.Size = UDim2.new(1, -150, 1, 0)
    titleLabel.Position = UDim2.new(0, 20, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title
    titleLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    titleLabel.TextSize = 18
    titleLabel.Font = Enum.Font.GothamBold
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Parent = titleBar

    local closeBtn = Instance.new("TextButton")
    closeBtn.Name = randomName()
    closeBtn.Size = UDim2.new(0, 38, 0, 38)
    closeBtn.Position = UDim2.new(1, -48, 0, 6)
    closeBtn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    closeBtn.Text = "√ó"
    closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    closeBtn.TextSize = 24
    closeBtn.Font = Enum.Font.GothamBold
    closeBtn.BorderSizePixel = 0
    closeBtn.AutoButtonColor = false
    closeBtn.Parent = titleBar

    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(0, 8)
    closeCorner.Parent = closeBtn

    local minimizeBtn = Instance.new("TextButton")
    minimizeBtn.Name = randomName()
    minimizeBtn.Size = UDim2.new(0, 38, 0, 38)
    minimizeBtn.Position = UDim2.new(1, -92, 0, 6)
    minimizeBtn.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
    minimizeBtn.Text = "‚àí"
    minimizeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
    minimizeBtn.TextSize = 22
    minimizeBtn.Font = Enum.Font.GothamBold
    minimizeBtn.BorderSizePixel = 0
    minimizeBtn.AutoButtonColor = false
    minimizeBtn.Parent = titleBar

    local minCorner = Instance.new("UICorner")
    minCorner.CornerRadius = UDim.new(0, 8)
    minCorner.Parent = minimizeBtn

    local floatingBtn = Instance.new("TextButton")
    floatingBtn.Name = randomName()
    floatingBtn.Size = UDim2.new(0, 180, 0, 45)
    floatingBtn.Position = UDim2.new(0.5, -90, 0, 15)
    floatingBtn.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
    floatingBtn.BackgroundTransparency = 0.1
    floatingBtn.BorderSizePixel = 0
    floatingBtn.Visible = false
    floatingBtn.Active = true
    floatingBtn.Text = ""
    floatingBtn.AutoButtonColor = false
    floatingBtn.Parent = self.ScreenGui

    local floatingCorner = Instance.new("UICorner")
    floatingCorner.CornerRadius = UDim.new(0, 12)
    floatingCorner.Parent = floatingBtn

    local rgbBorder = Instance.new("UIStroke")
    rgbBorder.Thickness = 2
    rgbBorder.Color = Color3.fromRGB(255, 0, 0)
    rgbBorder.Transparency = 0.5
    rgbBorder.Parent = floatingBtn

    task.spawn(function()
        local hue = 0
        while floatingBtn and floatingBtn.Parent do
            hue = (hue + 1) % 360
            if rgbBorder then
                rgbBorder.Color = Color3.fromHSV(hue / 360, 0.8, 1)
            end
            task.wait(0.01)
        end
    end)

    local floatingLabel = Instance.new("TextLabel")
    floatingLabel.Name = randomName()
    floatingLabel.Size = UDim2.new(1, -30, 1, 0)
    floatingLabel.Position = UDim2.new(0, 15, 0, 0)
    floatingLabel.BackgroundTransparency = 1
    floatingLabel.Text = title
    floatingLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    floatingLabel.TextSize = 16
    floatingLabel.Font = Enum.Font.GothamBold
    floatingLabel.TextXAlignment = Enum.TextXAlignment.Center
    floatingLabel.ZIndex = 2
    floatingLabel.Parent = floatingBtn

    self.TabContainer = Instance.new("ScrollingFrame")
    self.TabContainer.Name = randomName()
    self.TabContainer.Size = UDim2.new(0, 140, 1, -60)
    self.TabContainer.Position = UDim2.new(0, 10, 0, 60)
    self.TabContainer.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
    self.TabContainer.BorderSizePixel = 0
    self.TabContainer.ClipsDescendants = true
    self.TabContainer.ScrollBarThickness = 2
    self.TabContainer.ScrollBarImageColor3 = Color3.fromRGB(80, 80, 80)
    self.TabContainer.CanvasSize = UDim2.new(0, 0, 0, 0)
    self.TabContainer.ScrollingDirection = Enum.ScrollingDirection.Y
    self.TabContainer.ZIndex = 10
    self.TabContainer.Parent = self.MainFrame

    local tabContainerCorner = Instance.new("UICorner")
    tabContainerCorner.CornerRadius = UDim.new(0, 10)
    tabContainerCorner.Parent = self.TabContainer

    local tabLayout = Instance.new("UIListLayout")
    tabLayout.SortOrder = Enum.SortOrder.LayoutOrder
    tabLayout.Padding = UDim.new(0, 8)
    tabLayout.Parent = self.TabContainer

    tabLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        self.TabContainer.CanvasSize = UDim2.new(0, 0, 0, tabLayout.AbsoluteContentSize.Y + 20)
    end)

    local tabPadding = Instance.new("UIPadding")
    tabPadding.PaddingTop = UDim.new(0, 10)
    tabPadding.PaddingBottom = UDim.new(0, 10)
    tabPadding.PaddingLeft = UDim.new(0, 10)
    tabPadding.PaddingRight = UDim.new(0, 10)
    tabPadding.Parent = self.TabContainer

    self.TabContentContainer = Instance.new("Frame")
    self.TabContentContainer.Name = randomName()
    self.TabContentContainer.Size = UDim2.new(1, -160, 1, -70)
    self.TabContentContainer.Position = UDim2.new(0, 155, 0, 60)
    self.TabContentContainer.BackgroundTransparency = 1
    self.TabContentContainer.BorderSizePixel = 0
    self.TabContentContainer.ClipsDescendants = true
    self.TabContentContainer.ZIndex = 5
    self.TabContentContainer.Parent = self.MainFrame

    local dragging, dragInput, dragStart, startPos
    local function update(input)
        local delta = input.Position - dragStart
        self.MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end

    titleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = self.MainFrame.Position
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then dragging = false end
            end)
        end
    end)

    titleBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then update(input) end
    end)

    local floatingDragging, floatingDragInput, floatingDragStart, floatingStartPos, floatingMouseMoved
    local function updateFloating(input)
        local delta = input.Position - floatingDragStart
        if math.abs(delta.X) > 5 or math.abs(delta.Y) > 5 then floatingMouseMoved = true end
        floatingBtn.Position = UDim2.new(floatingStartPos.X.Scale, floatingStartPos.X.Offset + delta.X, floatingStartPos.Y.Scale, floatingStartPos.Y.Offset + delta.Y)
    end

    floatingBtn.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            floatingDragging, floatingDragStart, floatingStartPos, floatingMouseMoved = true, input.Position, floatingBtn.Position, false
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then floatingDragging = false end
            end)
        end
    end)

    floatingBtn.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            floatingDragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == floatingDragInput and floatingDragging then updateFloating(input) end
    end)

    closeBtn.MouseButton1Click:Connect(function()
        TweenService:Create(self.MainFrame, FADE_IN_TWEEN_INFO, {BackgroundTransparency = 1}):Play()
        task.wait(0.5)
        self.ScreenGui:Destroy()
    end)
    closeBtn.MouseEnter:Connect(function() TweenService:Create(closeBtn, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(196, 43, 28)}):Play() end)
    closeBtn.MouseLeave:Connect(function() TweenService:Create(closeBtn, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(45, 45, 45)}):Play() end)

    minimizeBtn.MouseButton1Click:Connect(function()
        self.MainFrame.Visible = false
        floatingBtn.Visible = true
    end)
    minimizeBtn.MouseEnter:Connect(function() TweenService:Create(minimizeBtn, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromHSV(0.58, 0.8, 0.9)}):Play() end)
    minimizeBtn.MouseLeave:Connect(function() TweenService:Create(minimizeBtn, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(45, 45, 45)}):Play() end)

    floatingBtn.MouseButton1Click:Connect(function()
        if not floatingMouseMoved then
            floatingBtn.Visible = false
            self.MainFrame.Visible = true
        end
    end)
    floatingBtn.MouseEnter:Connect(function() TweenService:Create(floatingBtn, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(45, 45, 45), BackgroundTransparency = 0}):Play() end)
    floatingBtn.MouseLeave:Connect(function() TweenService:Create(floatingBtn, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(28, 28, 28), BackgroundTransparency = 0.1}):Play() end)

    self.Tabs, self.CurrentTab, self._mainFrame = {}, nil, self.MainFrame
    return self
end

function WindUI:Tab(options) return self:CreateTab(options) end

function WindUI:CreateTab(options)
    options = options or {}
    local name, icon, locked = options.Name or options.Title or "Tab", getIcon(options.Icon), options.Locked or false

    local tabButton = Instance.new("TextButton")
    tabButton.Name = randomName()
    tabButton.Size = UDim2.new(1, 0, 0, 45)
    tabButton.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
    tabButton.Text, tabButton.BorderSizePixel, tabButton.AutoButtonColor, tabButton.ZIndex = "", 0, false, 11

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = tabButton

    local iconLabel
    if icon then
        iconLabel = Instance.new("TextLabel")
        iconLabel.Size = UDim2.new(0, 25, 1, 0)
        iconLabel.Position = UDim2.new(0, 10, 0, 0)
        iconLabel.BackgroundTransparency = 1
        iconLabel.Text = icon
        iconLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
        iconLabel.TextSize = 18
        iconLabel.Font = Enum.Font.GothamBold
        iconLabel.ZIndex = 12
        iconLabel.Parent = tabButton
    end

    local textLabel = Instance.new("TextLabel")
    if icon then
        textLabel.Size, textLabel.Position, textLabel.TextXAlignment = UDim2.new(1, -45, 1, 0), UDim2.new(0, 40, 0, 0), Enum.TextXAlignment.Left
    else
        textLabel.Size, textLabel.Position, textLabel.TextXAlignment = UDim2.new(1, -20, 1, 0), UDim2.new(0, 10, 0, 0), Enum.TextXAlignment.Center
    end
    textLabel.BackgroundTransparency = 1
    textLabel.Text = name
    textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
    textLabel.TextSize = 14
    textLabel.Font = Enum.Font.GothamMedium
    textLabel.TextYAlignment = Enum.TextYAlignment.Center
    textLabel.ZIndex = 12
    textLabel.Parent = tabButton

    if locked then
        local lockIcon = Instance.new("TextLabel")
        lockIcon.Size = UDim2.new(0, 20, 0, 20)
        lockIcon.Position = UDim2.new(1, -25, 0.5, -10)
        lockIcon.BackgroundTransparency = 1
        lockIcon.Text = "üîí"
        lockIcon.TextColor3 = Color3.fromRGB(200, 200, 200)
        lockIcon.TextSize = 14
        lockIcon.Font = Enum.Font.GothamBold
        lockIcon.ZIndex = 12
        lockIcon.Parent = tabButton
    end

    local tabContent = Instance.new("ScrollingFrame")
    tabContent.Name, tabContent.Size, tabContent.Position = name .. "Content", UDim2.new(1, 0, 1, 0), UDim2.new(0, 0, 0, 0)
    tabContent.BackgroundTransparency, tabContent.BorderSizePixel, tabContent.ScrollBarThickness = 1, 0, 2
    tabContent.ScrollBarImageColor3 = Color3.fromHSV(0.58, 0.8, 0.9)
    tabContent.CanvasSize, tabContent.ScrollingDirection, tabContent.Visible = UDim2.new(0, 0, 0, 0), Enum.ScrollingDirection.Y, false
    tabContent.ZIndex, tabContent.Parent = 6, self.TabContentContainer

    local tabContentLayout = Instance.new("UIListLayout")
    tabContentLayout.SortOrder, tabContentLayout.Padding = Enum.SortOrder.LayoutOrder, UDim.new(0, 12)
    tabContentLayout.Parent = tabContent

    tabContentLayout:GetPropertyChangedSignal("AbsoluteContentSize"):Connect(function()
        if tabContent and tabContentLayout then
            tabContent.CanvasSize = UDim2.new(0, 0, 0, tabContentLayout.AbsoluteContentSize.Y + 15)
        end
    end)

    local tab = {Button = tabButton, Content = tabContent, Icon = iconLabel, Text = textLabel, Name = name, Locked = locked}
    self.Tabs[name] = tab

    tabButton.MouseButton1Click:Connect(function()
        if locked then
            if self.ScreenGui and self._mainFrame then createPremiumPopup(self.ScreenGui, self._mainFrame) end
            return
        end
        for _, t in pairs(self.Tabs) do
            TweenService:Create(t.Button, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(35, 35, 35)}):Play()
            if t.Icon then TweenService:Create(t.Icon, BUTTON_TWEEN_INFO, {TextColor3 = Color3.fromRGB(200, 200, 200)}):Play() end
            TweenService:Create(t.Text, BUTTON_TWEEN_INFO, {TextColor3 = Color3.fromRGB(255, 255, 255)}):Play()
            t.Content.Visible = false
        end
        TweenService:Create(tabButton, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromHSV(0.58, 0.8, 0.9)}):Play()
        if iconLabel then TweenService:Create(iconLabel, BUTTON_TWEEN_INFO, {TextColor3 = Color3.fromRGB(255, 255, 255)}):Play() end
        TweenService:Create(textLabel, BUTTON_TWEEN_INFO, {TextColor3 = Color3.fromRGB(255, 255, 255)}):Play()
        tabContent.Visible, self.CurrentTab = true, name
    end)

    tabButton.MouseEnter:Connect(function()
        if not locked and self.CurrentTab ~= name then
            TweenService:Create(tabButton, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(45, 45, 45)}):Play()
        end
    end)
    tabButton.MouseLeave:Connect(function()
        if not locked and self.CurrentTab ~= name then
            TweenService:Create(tabButton, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(35, 35, 35)}):Play()
        end
    end)
    tabButton.Parent = self.TabContainer

    if not self.CurrentTab and not locked then
        tabButton.BackgroundColor3 = Color3.fromHSV(0.58, 0.8, 0.9)
        if iconLabel then iconLabel.TextColor3 = Color3.fromRGB(255, 255, 255) end
        textLabel.TextColor3 = Color3.fromRGB(255, 255, 255)
        tabContent.Visible, self.CurrentTab = true, name
    end

    local methods = {
        Label = function(_, o) return createLabel(o, tabContent) end,
        Button = function(_, o) o = o or {}; o._screenGui, o._mainFrame = self.ScreenGui, self._mainFrame; return createButton(o, tabContent) end,
        Toggle = function(_, o) o = o or {}; o._screenGui, o._mainFrame = self.ScreenGui, self._mainFrame; return createToggle(o, tabContent) end,
        Slider = function(_, o) return createSlider(o, tabContent) end,
        Dropdown = function(_, o) return createDropdown(o, tabContent) end
    }
    methods.CreateLabel, methods.CreateButton, methods.CreateToggle, methods.CreateSlider, methods.CreateDropdown = methods.Label, methods.Button, methods.Toggle, methods.Slider, methods.Dropdown

    return setmetatable({Content = tabContent, Name = name}, {__index = methods})
end

-- Component creation helper functions
function createLabel(options, parent)
    options = options or {}
    local label = Instance.new("TextLabel")
    label.Size, label.BackgroundTransparency = UDim2.new(1, 0, 0, 25), 1
    label.Text, label.TextColor3, label.TextSize = options.Text or "Label", Color3.fromRGB(180, 180, 180), 13
    label.Font, label.TextXAlignment = Enum.Font.GothamBold, Enum.TextXAlignment.Left
    label.ZIndex, label.Parent = 2, parent
    return label
end

function createButton(options, parent)
    if not parent or not parent.Parent then return nil end
    options = options or {}
    local text, callback, locked = options.Name or options.Title or "Button", options.Callback, options.Locked or false
    local screenGui, mainFrame = options._screenGui, options._mainFrame

    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0, 200, 0, 38)
    button.BackgroundColor3 = locked and Color3.fromRGB(45, 45, 45) or Color3.fromHSV(0.58, 0.8, 0.9)
    button.Text, button.TextColor3 = text, locked and Color3.fromRGB(120, 120, 120) or Color3.fromRGB(255, 255, 255)
    button.TextSize, button.Font = 15, Enum.Font.GothamMedium
    button.BorderSizePixel, button.AutoButtonColor, button.ZIndex, button.Parent = 0, false, 2, parent

    local corner = Instance.new("UICorner")
    corner.CornerRadius = UDim.new(0, 8)
    corner.Parent = button

    if locked then
        local lockIcon = Instance.new("TextLabel")
        lockIcon.Size, lockIcon.Position = UDim2.new(0, 20, 0, 20), UDim2.new(1, -30, 0.5, -10)
        lockIcon.BackgroundTransparency = 1
        lockIcon.Text, lockIcon.TextColor3, lockIcon.TextSize = "üîí", Color3.fromRGB(120, 120, 120), 14
        lockIcon.Font, lockIcon.ZIndex, lockIcon.Parent = Enum.Font.Gotham, 3, button
        button.MouseButton1Click:Connect(function() if screenGui and mainFrame then createPremiumPopup(screenGui, mainFrame) end end)
        return button
    end

    button.MouseEnter:Connect(function() TweenService:Create(button, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromHSV(0.58, 0.7, 0.8)}):Play() end)
    button.MouseLeave:Connect(function() TweenService:Create(button, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromHSV(0.58, 0.8, 0.9)}):Play() end)
    button.MouseButton1Down:Connect(function() TweenService:Create(button, BUTTON_TWEEN_INFO, {Size = UDim2.new(0, 195, 0, 36)}):Play() end)
    button.MouseButton1Up:Connect(function() TweenService:Create(button, BUTTON_TWEEN_INFO, {Size = UDim2.new(0, 200, 0, 38)}):Play() end)
    if callback then button.MouseButton1Click:Connect(callback) end
    return button
end

function createToggle(options, parent)
    if not parent or not parent.Parent then return nil end
    options = options or {}
    local text, default, callback, locked = options.Name or options.Title or "Toggle", options.Default or false, options.Callback, options.Locked or false
    local screenGui, mainFrame = options._screenGui, options._mainFrame

    local toggleFrame = Instance.new("Frame")
    toggleFrame.Size, toggleFrame.BackgroundColor3 = UDim2.new(1, 0, 0, 40), Color3.fromRGB(35, 35, 35)
    toggleFrame.BorderSizePixel, toggleFrame.ZIndex, toggleFrame.Parent = 0, 2, parent

    local frameCorner = Instance.new("UICorner")
    frameCorner.CornerRadius = UDim.new(0, 8)
    frameCorner.Parent = toggleFrame

    local clickDetector = Instance.new("TextButton")
    clickDetector.Size, clickDetector.BackgroundTransparency, clickDetector.ZIndex = UDim2.new(1, 0, 1, 0), 1, 3
    clickDetector.Parent = toggleFrame

    local label = Instance.new("TextLabel")
    label.Size = locked and UDim2.new(1, -95, 1, 0) or UDim2.new(1, -70, 1, 0)
    label.Position, label.BackgroundTransparency, label.Text = UDim2.new(0, 15, 0, 0), 1, text
    label.TextColor3, label.TextSize, label.Font = Color3.fromRGB(255, 255, 255), 15, Enum.Font.Gotham
    label.TextXAlignment, label.ZIndex, label.Parent = Enum.TextXAlignment.Left, 3, toggleFrame

    if locked then
        local lockIcon = Instance.new("TextLabel")
        lockIcon.Size, lockIcon.Position = UDim2.new(0, 20, 0, 20), UDim2.new(1, -85, 0.5, -10)
        lockIcon.BackgroundTransparency, lockIcon.Text, lockIcon.TextColor3 = 1, "üîí", Color3.fromRGB(200, 200, 200)
        lockIcon.TextSize, lockIcon.Font, lockIcon.ZIndex, lockIcon.Parent = 14, Enum.Font.GothamBold, 3, toggleFrame
    end

    local toggleButton = Instance.new("Frame")
    toggleButton.Size, toggleButton.Position = UDim2.new(0, 50, 0, 24), UDim2.new(1, -60, 0.5, -12)
    toggleButton.BackgroundColor3, toggleButton.ZIndex, toggleButton.Parent = Color3.fromRGB(50, 50, 50), 3, toggleFrame

    local toggleCorner = Instance.new("UICorner")
    toggleCorner.CornerRadius = UDim.new(1, 0)
    toggleCorner.Parent = toggleButton

    local toggleCircle = Instance.new("Frame")
    toggleCircle.Size, toggleCircle.Position = UDim2.new(0, 20, 0, 20), UDim2.new(0, 2, 0.5, -10)
    toggleCircle.BackgroundColor3, toggleCircle.ZIndex, toggleCircle.Parent = Color3.fromRGB(220, 220, 220), 4, toggleButton

    local circleCorner = Instance.new("UICorner")
    circleCorner.CornerRadius = UDim.new(1, 0)
    circleCorner.Parent = toggleCircle

    local toggled = default
    local function updateToggle(animate)
        local tweenInfo = animate and TOGGLE_TWEEN_ANIMATED or TOGGLE_TWEEN_INSTANT
        if toggled then
            TweenService:Create(toggleButton, tweenInfo, {BackgroundColor3 = Color3.fromHSV(0.58, 0.8, 0.9)}):Play()
            TweenService:Create(toggleCircle, tweenInfo, {Position = UDim2.new(1, -22, 0.5, -10)}):Play()
        else
            TweenService:Create(toggleButton, tweenInfo, {BackgroundColor3 = Color3.fromRGB(50, 50, 50)}):Play()
            TweenService:Create(toggleCircle, tweenInfo, {Position = UDim2.new(0, 2, 0.5, -10)}):Play()
        end
        if callback then callback(toggled) end
    end
    clickDetector.MouseButton1Click:Connect(function()
        if locked then
            if screenGui and mainFrame then createPremiumPopup(screenGui, mainFrame) end
            return
        end
        toggled = not toggled
        updateToggle(true)
    end)
    updateToggle(false)
    return toggleFrame
end

function createSlider(options, parent)
    options = options or {}
    local text, min, max, default, callback = options.Name or options.Title or "Slider", options.Min or 0, options.Max or 100, options.Default or 50, options.Callback

    local sliderFrame = Instance.new("Frame")
    sliderFrame.Size, sliderFrame.BackgroundColor3 = UDim2.new(1, 0, 0, 55), Color3.fromRGB(35, 35, 35)
    sliderFrame.ZIndex, sliderFrame.Parent = 2, parent

    local frameCorner = Instance.new("UICorner")
    frameCorner.CornerRadius = UDim.new(0, 8)
    frameCorner.Parent = sliderFrame

    local label = Instance.new("TextLabel")
    label.Size, label.Position, label.BackgroundTransparency = UDim2.new(1, -60, 0, 20), UDim2.new(0, 15, 0, 8), 1
    label.Text, label.TextColor3, label.TextSize = text, Color3.fromRGB(255, 255, 255), 15
    label.Font, label.TextXAlignment, label.ZIndex, label.Parent = Enum.Font.Gotham, Enum.TextXAlignment.Left, 3, sliderFrame

    local valueLabel = Instance.new("TextLabel")
    valueLabel.Size, valueLabel.Position, valueLabel.BackgroundTransparency = UDim2.new(0, 50, 0, 20), UDim2.new(1, -60, 0, 8), 1
    valueLabel.Text, valueLabel.TextColor3 = tostring(default), Color3.fromHSV(0.58, 0.8, 0.9)
    valueLabel.TextSize, valueLabel.Font, valueLabel.ZIndex, valueLabel.Parent = 15, Enum.Font.GothamBold, 3, sliderFrame

    local sliderHitbox = Instance.new("Frame")
    sliderHitbox.Size, sliderHitbox.Position = UDim2.new(1, -30, 0, 30), UDim2.new(0, 15, 1, -33)
    sliderHitbox.BackgroundTransparency, sliderHitbox.ZIndex, sliderHitbox.Parent = 1, 3, sliderFrame

    local sliderTrack = Instance.new("Frame")
    sliderTrack.Size, sliderTrack.Position = UDim2.new(1, 0, 0, 6), UDim2.new(0, 0, 0.5, -3)
    sliderTrack.BackgroundColor3, sliderTrack.ZIndex, sliderTrack.Parent = Color3.fromRGB(50, 50, 50), 3, sliderHitbox
    local trackCorner = Instance.new("UICorner")
    trackCorner.CornerRadius = UDim.new(1, 0)
    trackCorner.Parent = sliderTrack

    local sliderFill = Instance.new("Frame")
    sliderFill.Size = UDim2.new((default - min) / (max - min), 0, 1, 0)
    sliderFill.BackgroundColor3, sliderFill.ZIndex, sliderFill.Parent = Color3.fromHSV(0.58, 0.8, 0.9), 3, sliderTrack
    local fillCorner = Instance.new("UICorner")
    fillCorner.CornerRadius = UDim.new(1, 0)
    fillCorner.Parent = sliderFill

    local sliderButton = Instance.new("TextButton")
    sliderButton.Size, sliderButton.Position = UDim2.new(0, 16, 0, 16), UDim2.new((default - min) / (max - min), -8, 0.5, -8)
    sliderButton.BackgroundColor3, sliderButton.AutoButtonColor = Color3.fromRGB(255, 255, 255), false
    sliderButton.ZIndex, sliderButton.Parent = 4, sliderTrack
    local buttonCorner = Instance.new("UICorner")
    buttonCorner.CornerRadius = UDim.new(1, 0)
    buttonCorner.Parent = sliderButton

    local currentValue, sliding = default, false
    local function updateSlider(input)
        local relativeX = math.clamp((input.Position.X - sliderTrack.AbsolutePosition.X) / sliderTrack.AbsoluteSize.X, 0, 1)
        currentValue = math.floor(min + (max - min) * relativeX + 0.5)
        valueLabel.Text = tostring(currentValue)
        sliderFill.Size = UDim2.new(relativeX, 0, 1, 0)
        sliderButton.Position = UDim2.new(relativeX, -8, 0.5, -8)
        if callback then callback(currentValue) end
    end

    sliderButton.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            sliding = true
        end
    end)

    UserInputService.InputEnded:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            if sliding then
                sliding = false
            end
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if sliding and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
            updateSlider(input)
        end
    end)

    sliderHitbox.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            sliding = true
            updateSlider(input)
        end
    end)

    return sliderFrame
end

function createDropdown(options, parent)
    options = options or {}
    local text, dropdownOptions, callback = options.Name or options.Title or "Dropdown", options.Options or {"Option 1", "Option 2"}, options.Callback

    local dropdownFrame = Instance.new("Frame")
    dropdownFrame.Size, dropdownFrame.BackgroundColor3 = UDim2.new(1, 0, 0, 40), Color3.fromRGB(35, 35, 35)
    dropdownFrame.ClipsDescendants, dropdownFrame.ZIndex, dropdownFrame.Parent = false, 200, parent
    local frameCorner = Instance.new("UICorner")
    frameCorner.CornerRadius = UDim.new(0, 8)
    frameCorner.Parent = dropdownFrame

    local dropdownButton = Instance.new("TextButton")
    dropdownButton.Size, dropdownButton.BackgroundTransparency, dropdownButton.ZIndex = UDim2.new(1, 0, 1, 0), 1, 201
    dropdownButton.Parent = dropdownFrame

    local label = Instance.new("TextLabel")
    label.Size, label.Position, label.BackgroundTransparency, label.Text = UDim2.new(1, -40, 1, 0), UDim2.new(0, 15, 0, 0), 1, text
    label.TextColor3, label.TextSize, label.Font, label.ZIndex, label.Parent = Color3.fromRGB(255, 255, 255), 15, Enum.Font.Gotham, 201, dropdownFrame

    local arrow = Instance.new("TextLabel")
    arrow.Size, arrow.Position, arrow.BackgroundTransparency, arrow.Text = UDim2.new(0, 30, 1, 0), UDim2.new(1, -35, 0, 0), 1, "‚ñº"
    arrow.TextColor3, arrow.TextSize, arrow.Font, arrow.ZIndex, arrow.Parent = Color3.fromRGB(200, 200, 200), 14, Enum.Font.Gotham, 201, dropdownFrame

    local optionsFrame = Instance.new("ScrollingFrame")
    optionsFrame.Size, optionsFrame.Position = UDim2.new(1, 0, 0, 0), UDim2.new(0, 0, 1, 5)
    optionsFrame.BackgroundColor3, optionsFrame.Visible, optionsFrame.ClipsDescendants = Color3.fromRGB(35, 35, 35), false, true
    optionsFrame.ScrollBarThickness, optionsFrame.ScrollBarImageColor3 = 4, Color3.fromHSV(0.58, 0.8, 0.9)
    optionsFrame.ZIndex, optionsFrame.Parent = 300, dropdownFrame
    local optionsCorner = Instance.new("UICorner")
    optionsCorner.CornerRadius = UDim.new(0, 8)
    optionsCorner.Parent = optionsFrame
    local optionsLayout = Instance.new("UIListLayout")
    optionsLayout.Parent = optionsFrame

    local expanded = false
    dropdownButton.MouseButton1Click:Connect(function()
        expanded = not expanded
        local targetHeight = math.min(#dropdownOptions * 35, 157)
        local parentLayout = parent:FindFirstChildOfClass("UIListLayout")
        if expanded then
            optionsFrame.Visible = true
            local extraSpace = (dropdownFrame.AbsolutePosition.Y + dropdownFrame.AbsoluteSize.Y + targetHeight + 5) - (parent.AbsolutePosition.Y + parent.AbsoluteSize.Y)
            if extraSpace > 0 then parent.CanvasSize = UDim2.new(0, 0, 0, parent.CanvasSize.Y.Offset + extraSpace + 20) end
            TweenService:Create(optionsFrame, DROPDOWN_TWEEN_INFO, {Size = UDim2.new(1, 0, 0, targetHeight)}):Play()
            arrow.Text = "‚ñ≤"
        else
            if parentLayout then parent.CanvasSize = UDim2.new(0, 0, 0, parentLayout.AbsoluteContentSize.Y + 15) end
            local tween = TweenService:Create(optionsFrame, DROPDOWN_TWEEN_INFO, {Size = UDim2.new(1, 0, 0, 0)})
            tween:Play()
            tween.Completed:Connect(function() optionsFrame.Visible = false end)
            arrow.Text = "‚ñº"
        end
    end)

    for _, option in ipairs(dropdownOptions) do
        local optionButton = Instance.new("TextButton")
        optionButton.Size, optionButton.BackgroundColor3, optionButton.Text = UDim2.new(1, 0, 0, 35), Color3.fromRGB(35, 35, 35), option
        optionButton.TextColor3, optionButton.TextSize, optionButton.Font = Color3.fromRGB(255, 255, 255), 14, Enum.Font.Gotham
        optionButton.AutoButtonColor, optionButton.ZIndex, optionButton.Parent = false, 301, optionsFrame
        optionButton.MouseEnter:Connect(function() TweenService:Create(optionButton, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromHSV(0.58, 0.8, 0.9)}):Play() end)
        optionButton.MouseLeave:Connect(function() TweenService:Create(optionButton, BUTTON_TWEEN_INFO, {BackgroundColor3 = Color3.fromRGB(35, 35, 35)}):Play() end)
        optionButton.MouseButton1Click:Connect(function()
            label.Text, expanded = option, false
            local parentLayout = parent:FindFirstChildOfClass("UIListLayout")
            if parentLayout then parent.CanvasSize = UDim2.new(0, 0, 0, parentLayout.AbsoluteContentSize.Y + 15) end
            local tween = TweenService:Create(optionsFrame, DROPDOWN_TWEEN_INFO, {Size = UDim2.new(1, 0, 0, 0)})
            tween:Play()
            tween.Completed:Connect(function() optionsFrame.Visible = false end)
            arrow.Text = "‚ñº"
            if callback then callback(option) end
        end)
    end
    optionsFrame.CanvasSize = UDim2.new(0, 0, 0, #dropdownOptions * 35)
    return dropdownFrame
end

-- This returns the library table. The code below this will use it.
return WindUI
