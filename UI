local WindUI = {}
WindUI.__index = WindUI

function WindUI.new(title)
    local self = setmetatable({}, WindUI)

    -- Main UI
    self.ScreenGui = Instance.new("ScreenGui")
    self.ScreenGui.Name = "WindUI"
    self.ScreenGui.ResetOnSpawn = false
    self.ScreenGui.Parent = game:GetService("CoreGui")

    self.MainFrame = Instance.new("Frame")
    self.MainFrame.Size = UDim2.new(0, 400, 0, 300)
    self.MainFrame.Position = UDim2.new(0.5, -200, 0.5, -150)
    self.MainFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    self.MainFrame.BorderSizePixel = 0
    self.MainFrame.Parent = self.ScreenGui

    -- Title bar
    local titleBar = Instance.new("Frame")
    titleBar.Size = UDim2.new(1, 0, 0, 30)
    titleBar.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    titleBar.BorderSizePixel = 0
    titleBar.Parent = self.MainFrame

    local titleLabel = Instance.new("TextLabel")
    titleLabel.Size = UDim2.new(1, -10, 1, 0)
    titleLabel.Position = UDim2.new(0, 5, 0, 0)
    titleLabel.BackgroundTransparency = 1
    titleLabel.Text = title or "WindUI"
    titleLabel.TextColor3 = Color3.fromRGB(235, 235, 235)
    titleLabel.TextXAlignment = Enum.TextXAlignment.Left
    titleLabel.Font = Enum.Font.SourceSansSemibold
    titleLabel.TextSize = 18
    titleLabel.Parent = titleBar

    -- Tabs
    self.TabContainer = Instance.new("Frame")
    self.TabContainer.Size = UDim2.new(0, 100, 1, -30)
    self.TabContainer.Position = UDim2.new(0, 0, 0, 30)
    self.TabContainer.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    self.TabContainer.BorderSizePixel = 0
    self.TabContainer.Parent = self.MainFrame

    self.ContentFrame = Instance.new("Frame")
    self.ContentFrame.Size = UDim2.new(1, -100, 1, -30)
    self.ContentFrame.Position = UDim2.new(0, 100, 0, 30)
    self.ContentFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    self.ContentFrame.BorderSizePixel = 0
    self.ContentFrame.Parent = self.MainFrame

    self.Tabs = {}

    return self
end

function WindUI:createTab(tabName)
    local tabButton = Instance.new("TextButton")
    tabButton.Size = UDim2.new(1, 0, 0, 30)
    tabButton.BackgroundColor3 = Color3.fromRGB(20, 20, 20)
    tabButton.TextColor3 = Color3.fromRGB(235, 235, 235)
    tabButton.Font = Enum.Font.SourceSansSemibold
    tabButton.TextSize = 16
    tabButton.Text = tabName
    tabButton.BorderSizePixel = 0
    tabButton.Parent = self.TabContainer

    local tabFrame = Instance.new("Frame")
    tabFrame.Size = UDim2.new(1, 0, 1, 0)
    tabFrame.BackgroundColor3 = Color3.fromRGB(10, 10, 10)
    tabFrame.Visible = false
    tabFrame.Parent = self.ContentFrame

    self.Tabs[tabName] = tabFrame

    tabButton.MouseButton1Click:Connect(function()
        for _, frame in pairs(self.Tabs) do
            frame.Visible = false
        end
        tabFrame.Visible = true
    end)

    if #self.TabContainer:GetChildren() == 1 then
        tabFrame.Visible = true
    end

    return tabFrame
end

-- Toggle creation (spacing fixed, dark theme)
function WindUI:createToggle(parent, labelText, default, callback)
    local toggleFrame = Instance.new("Frame")
    toggleFrame.Size = UDim2.new(1, -10, 0, 30)
    toggleFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 15)
    toggleFrame.BorderSizePixel = 0
    toggleFrame.Parent = parent

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -55, 1, 0)
    label.Position = UDim2.new(0, 5, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = labelText
    label.TextColor3 = Color3.fromRGB(235, 235, 235)
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Font = Enum.Font.SourceSans
    label.TextSize = 16
    label.Parent = toggleFrame

    local toggleButton = Instance.new("TextButton")
    toggleButton.Size = UDim2.new(0, 40, 0, 24)
    toggleButton.Position = UDim2.new(1, -45, 0.5, -12)
    toggleButton.BackgroundColor3 = default and Color3.fromRGB(0, 170, 255) or Color3.fromRGB(40, 40, 40)
    toggleButton.Text = ""
    toggleButton.BorderSizePixel = 0
    toggleButton.Parent = toggleFrame

    local knob = Instance.new("Frame")
    knob.Size = UDim2.new(0, 20, 0, 20)
    knob.Position = default and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 2, 0.5, -10)
    knob.BackgroundColor3 = Color3.fromRGB(235, 235, 235)
    knob.BorderSizePixel = 0
    knob.Parent = toggleButton

    local state = default

    toggleButton.MouseButton1Click:Connect(function()
        state = not state
        knob:TweenPosition(state and UDim2.new(1, -22, 0.5, -10) or UDim2.new(0, 2, 0.5, -10), "Out", "Sine", 0.2, true)
        toggleButton.BackgroundColor3 = state and Color3.fromRGB(0, 170, 255) or Color3.fromRGB(40, 40, 40)
        if callback then
            callback(state)
        end
    end)
end

return WindUI
